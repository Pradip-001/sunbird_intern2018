"use strict";angular.module("playerApp").service("batchService",["restfulLearnerService","config","permissionsService","userService","$rootScope",function(e,t,r,i,n){this.batchDetails="",this.create=function(r){return e.post(t.URL.BATCH.CREATE,r)},this.update=function(r){return e.patch(t.URL.BATCH.UPDATE,r)},this.addUsers=function(r,i){return e.post(t.URL.BATCH.ADD_USERS+"/"+i,r)},this.removeUsers=function(r){return e.remove(t.URL.BATCH.DELETE+"/"+r.batchId,r)},this.getBatchDetails=function(r){return e.get(t.URL.BATCH.GET_DETAILS+"/"+r.batchId,r)},this.getAllBatchs=function(r){return e.post(t.URL.BATCH.GET_BATCHS,r)},this.getUserList=function(r){return e.post(t.URL.ADMIN.USER_SEARCH,r)},this.setBatchData=function(e){this.batchDetails=e},this.getBatchData=function(){return this.batchDetails},this.getUserOtherDetail=function(e){return e.email&&e.phone?" ("+e.email+", "+e.phone+")":e.email&&!e.phone?" ("+e.email+")":!e.email&&e.phone?" ("+e.phone+")":void 0},this.getRequestBodyForUserSearch=function(e,t){var n={filters:{}};e&&(n.query=e),t&&(n.filters.identifier=t);var s=r.getRoleOrgMap()&&r.getRoleOrgMap().COURSE_MENTOR,o=i.getCurrentUserProfile();if(s&&s.includes(o.rootOrgId))n.filters.rootOrgId=o.rootOrgId;else{try{var a=r.getRoleOrgMap().COURSE_MENTOR;_.remove(a,function(e){return e===o.rootOrgId})}catch(e){console.error(e)}n.filters["organisations.organisationId"]=a}return{request:n}},this.filterUserSearchResult=function(e,t){if(t){var r=null!==e.firstName&&e.firstName.includes(t),i=null!==e.lastName&&e.lastName.includes(t),n=null!==e.email&&e.email.includes(t),s=null!==e.phone&&e.phone.includes(t);return r||i||n||s}return!0}}]);