"use strict";angular.module("playerApp").service("courseConsumptionDataSource",["$rootScope","$q","httpAdapter","toasterService","dataSourceUtils",function(e,t,r,s,o){var a=this;this.getData=function(c){var n,u,i;return n=o.constructApiUrl(c,"COURSE_CONSUMPTION"),i=o.getDefaultHeader(),u=t.defer(),r.httpCall(n,"","GET",i).then(function(t){t&&"OK"===t.responseCode?u.resolve(a.parseResponse(t.result)):(s.error(e.messages.fmsg.m0075),u.reject(t))}).catch(function(t){s.error(e.messages.emsg.m0005),u.reject(t)}),u.promise},a.parseResponse=function(e){return a.blockData=[],angular.forEach(e.snapshot,function(e,t){"course.consumption.users_completed"!==t&&o.secondsToMin(e),a.blockData.push(e)}),{bucketData:e.series,numericData:a.blockData,series:""}}}]);