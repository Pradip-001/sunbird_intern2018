"use strict";angular.module("playerApp").service("routeHelperService",["$rootScope","$stateParams","$timeout","sessionService","permissionsService","toasterService","$state","$window",function(e,a,r,n,s,o,t,i){this.loadRouteConfig=function(r,n){a=n;var s=["Home","Courses","Resources","CourseNote","ContentNote","CourseContentNote","Toc","Player","Search","TocPlayer","PreviewCollection","Profile","PublicProfile"],o=["Courses","Resources","Search"],t={Home:"All",Courses:"Courses",Resources:"Library",CourseNote:"Courses",ContentNote:"Library",CourseContentNote:"Courses",Toc:"Courses",Player:"Library",Search:a?a.type:"All",TocPlayer:"Courses",PreviewCollection:"Library",Profile:"Users",PublicProfile:"Users"};s.indexOf(r)>=0?(e.isSearchPage=!0,e.searchKey=t[r]):e.isSearchPage=!1,o.indexOf(r)>=0?e.showFilter=!0:e.showFilter=!1,this.clearSearchSettings(),this.setBreaCrumbs(r)},this.setBreaCrumbs=function(r){switch(r){case"Home":e.breadCrumbsData=null;break;case"Courses":e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Courses",link:"learn"}];break;case"Resources":e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Library",link:"resources"}];break;case"CourseNote":var s=n.getSessionData("COURSE_PARAMS");e.breadCrumbsData=[{name:"Courses",link:"learn"},{name:s.courseName,link:"/course/"+s.courseId+"/"+s.lectureView},{name:"Notes",link:""}];break;case"ContentNote":e.breadCrumbsData=[{name:"Library",link:"resources"},{name:a.contentName,link:"content/"+a.contentId+"/"+a.contentName},{name:"Notes",link:""}];break;case"CourseContentNote":s=n.getSessionData("COURSE_PARAMS");var o="/course/"+s.courseId+"/"+s.lectureView,t=o+"/"+s.contentId+"/"+s.contentIndex;e.breadCrumbsData=[{name:s.courseName,link:o},{name:s.contentName,link:t},{name:"Notes",link:""}];break;case"Toc":s=n.getSessionData("COURSE_PARAMS"),s&&(e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Courses",link:"learn"},{name:s?s.courseName:"",link:""}]);break;case"announcementOutbox":e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Profile",link:"profile"},{name:"My Announcements",link:""}];break;case"announcementInbox":e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Announcements",link:""}];break;case"Profile":e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Profile",link:""}];break;case"Player":a.contentName&&(e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Library",link:"resources"},{name:a.contentName,link:""}]);break;case"Search":"Users"===e.searchKey||"Organisations"===e.searchKey?e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Profile",link:"profile"},{name:"Search",link:""}]:e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Search",link:""}];break;case"TocPlayer":s=n.getSessionData("COURSE_PARAMS"),e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Courses",link:"learn"},{name:s.courseName,link:""}];break;case"WorkSpace":e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Profile",link:"profile"},{name:e.frmelmnts.scttl.myworkspace,link:"workspace/content/create"}];break;case"EditContent":e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Profile",link:"profile"},{name:e.frmelmnts.scttl.myworkspace,link:"workspace/content/create"},{name:"Edit Content",link:""}];break;case"PreviewCollection":a.name&&(e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Library",link:"resources"},{name:a.name,link:""}]);break;case"orgDashboard":e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Profile",link:"profile"},{name:"Organization Admin Dashboard",link:""}];break;case"PublicProfile":e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Profile",link:"profile"},{name:a.userName,link:""}];break;case"MyActivity":e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Profile",link:"profile"},{name:"Course Creator Dashboard",link:""}];break;case"Setup":e.breadCrumbsData=[{name:"Home",link:"home"},{name:"Setup",link:"setup"}];break;default:e.breadCrumbsData=null}},this.checkStateAccess=function(a,r,n){if(s.checkRolesPermissions(a,r)){o.warning(e.messages.imsg.m0004),n.preventDefault();var m=JSON.parse(i.localStorage.getItem("previousURl"));t.go(m.name,m.params)}},this.clearSearchSettings=function(){e.search&&(e.search.selectedLanguage=[],e.search.selectedContentType=[],e.search.selectedSubject=[],e.search.selectedLocation="",e.search.selectedRoles=[],e.search.selectedBoard=[],e.search.selectedConcepts=[],e.search.broadCastConcepts(),e.search.filters={},e.search.sortBy={},e.search.sortByOption={},e.search.selectedGrades=[],e.search.selectedOrgType=[],r(function(){$("#multi-select-sort").dropdown("clear"),$("#content-search-filter-accordion").accordion("close",0)},0))},this.verifyAnnouncementData=function(a,r){var n=!0;return void 0===r?n=1===a:2===a?r&&r.title&&r.type&&r.from&&(r.description||r.links||r.attachments)||(n=!1):3!==a&&4!==a||(e.$emit("get:selected:items"),r.selTar&&0===r.selTar.length&&(n=!1)),n}}]);