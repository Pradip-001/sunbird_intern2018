"use strict";angular.module("playerApp").service("contentService",["restfulContentService","config","$rootScope","restfulLearnerService",function(t,n,r,e){this.create=function(e){return e.content.organization=r.organisationNames,e.content.createdFor=r.organisationIds,e.content.creator=r.firstName+" "+r.lastName,t.post(n.URL.CONTENT.CREATE,e)},this.copy=function(e,i){e.content.createdFor=r.organisationIds,e.content.creator=r.firstName+" "+r.lastName,e.content.organization=r.organisationNames;var o=n.URL.CONTENT.COPY+"/"+i;return t.post(o,e)},this.publish=function(r,e){var i=n.URL.CONTENT.PUBLISH+"/"+e;return t.post(i,r)},this.retire=function(r){var e=n.URL.CONTENT.RETIRE;return t.remove(e,r)},this.reject=function(r,e){var i=n.URL.CONTENT.REJECT+"/"+e;return t.post(i,r)},this.uploadMedia=function(t){return e.upload(n.URL.CONTENT.UPLOAD_MEDIA,t)},this.getById=function(r,e){var i=n.URL.CONTENT.GET+"/"+r.contentId;return t.get(i,r,null,e)},this.flag=function(r,e){var i=n.URL.CONTENT.FLAG+"/"+e;return t.post(i,r)},this.acceptContentFlag=function(r,e){var i=n.URL.CONTENT.ACCEPT_FLAG+"/"+e;return t.post(i,r)},this.discardContentFlag=function(r,e){var i=n.URL.CONTENT.DISCARD_FLAG+"/"+e;return t.post(i,r)},this.validateContent=function(t){if(_.isString(t)){var n=[t];return _.isArray(n)?_.compact(n).join(", "):""}return _.isArray(t)?_.compact(t).join(", "):""},this.getConceptsNames=function(t){var n=_.map(t,"name");if(t&&_.isArray(t)&&n.length<t.length){var e=_.filter(r.concepts,function(n){return _.includes(t,n.identifier)});n=_.map(e,"name")}return n.join(", ")}}]);