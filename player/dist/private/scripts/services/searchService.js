"use strict";angular.module("playerApp").service("searchService",["restfulContentService","config","$q","restfulLearnerService","$rootScope",function(e,t,r,n,s){this.contentSearch=function(r){return r.filters.contentType||(r.filters.contentType=["Collection","TextBook","LessonPlan","Resource","Story","Worksheet","Game"]),r=this.updateReqForChannelFilter(r),e.post(t.URL.CONTENT.SEARCH,r)},this.courseSearch=function(r){return r=this.updateReqForChannelFilter(r),e.post(t.URL.COURSE.SEARCH,r)},this.search=function(r){var n=r&&r.filters&&r.filters.objectType;return n&&"Content"!==n&&!n.includes("Content")||(r=this.updateReqForChannelFilter(r)),e.post(t.URL.COMPOSITE.SEARCH,r)},this.setPublicUserProfile=function(e){return this.publicUser={responseCode:"OK",result:{response:e}},!0},this.getPublicUserProfile=function(n,s){if(void 0!==s)return e.get(t.URL.USER.GET_PROFILE+"/"+n);if(this.publicUser){var i=r.defer();return i.resolve(this.publicUser),i.promise}return e.get(t.URL.USER.GET_PROFILE+"/"+n)},this.getOrgTypes=function(){var e=t.URL.ORG_TYPE.GET;return n.get(e)},this.setOrgTypes=function(e){this.orgTypes=e},this.getOrgTypeS=function(){if(this.orgTypes){var e=r.defer();return e.resolve(this.orgTypes),e.promise}return this.getOrgTypes().then(function(e){if("OK"===e.responseCode)return e.result.response})},this.getChannel=function(r){return r=r||org.sunbird.portal.channel,e.get(t.URL.CHANNEL.READ+"/"+r)},this.getFramework=function(r){return e.get(t.URL.FRAMEWORK.READ+"/"+r)},this.getDataDrivenFormsConfig=function(r){return r.rootOrgId=org.sunbird.portal.channel,e.post(t.URL.dataDrivenForms.READ,r)},this.updateReqForChannelFilter=function(e){return s.content_channel_filter_type&&"self"===s.content_channel_filter_type.toLowerCase()&&(e=e||{},e.filters=e.filters||{},e.filters.channel=_.concat([],org.sunbird.portal.channel)),e}}]);