"use strict";angular.module("playerApp").factory("LineChart",[function(){function e(){}function r(e){for(var r=[],a=0;a<e;a++){var o=n();r.push({backgroundColor:o,borderColor:o,fill:!1})}return r}function n(){for(var e="#",r=0;r<6;r++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}function a(e){return{legend:{display:!0},scales:{xAxes:[{gridLines:{display:!1}}],yAxes:[{scaleLabel:{display:!0,labelString:e},ticks:{beginAtZero:!0}}]}}}function o(e){var r=[],n=[];return _.forEach(e.buckets,function(e,a){r.push(e.value),n.push(e.key_name)}),{labels:n,values:r}}function t(e){if(e){var n=[],t={};return _.forEach(e.bucketData,function(n,u){var i={},s=e.name;""===e.series?(i.legend=[n.name],s=void 0!==n.time_unit?n.name+" ("+n.time_unit+")":n.name):i.legend=e.series;var l=angular.copy(o(n));i.yaxes=[l.values],i.xaxes=l.labels,i.options=a(s),t[n.group_id]?Array.prototype.push.apply(t[n.group_id].yaxes,i.yaxes):t[n.group_id]=i,i.colors=r(t[n.group_id].legend.length)}),_.forOwn(t,function(e,r){n.push([e.legend,e.xaxes,e.yaxes,e.colors,e.options,r])}),n}}return e.prototype.render=function(e){return t(e)},e}]);