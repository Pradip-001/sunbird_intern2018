"use strict";angular.module("playerApp").controller("HomeController",["$state","learnService","$rootScope","sessionService","toasterService","telemetryService",function(e,o,r,s,t,n){var i=this;i.showBrowserMsg=!1,i.loadCarousel=function(){$(".ui .progress .course-progress").progress(),$(".ui.rating").rating({maxRating:5}).rating("disable",!0)},i.loadFeaturedCarousel=function(){$(".ui.rating").rating({maxRating:5}).rating("disable",!0)},i.getToDoList=function(){r.toDoList=[],r.profileCompleteness<100&&(r.toDoList=[{title:r.messages.stmsg.m0060,missingFields:r.profileMissingFields,value:r.profileCompleteness,userId:r.userId,type:"profile"}]),Array.prototype.push.apply(r.toDoList,r.enrolledCourses)},i.otherSection=function(){var e={request:{recommendType:"course"}},s="pageApi";i[s]={},i[s].loader=t.loader("",r.messages.stmsg.m0002),o.recommendedCourses(e).then(function(e){e&&"OK"===e.responseCode?(i.recommendedCourse=e.result.response,i[s].loader.showLoader=!1):(i[s].loader.showLoader=!1,t.error(r.messages.fmsg.m0002))}).catch(function(){i[s].loader.showLoader=!1,t.error(r.messages.fmsg.m0002)})},i.openCourseView=function(o,t){var n="no";n=r.enrolledCourseIds[o.courseId||o.identifier]?"no":"yes";var i={courseType:t,courseId:o.courseId||o.identifier,lectureView:n,progress:o.progress,total:o.total,courseRecordId:o.id,courseName:o.courseName||o.name,lastReadContentId:o.lastReadContentId};s.setSessionData("COURSE_PARAMS",i),e.go("Toc",i)},i.generateInteractEvent=function(e,o,r,s,t,i,a){n.interactTelemetryData(e,o,r,s,t,i,a)};var a=[];i.lineInView=function(e,o,s,t){var i=_.filter(a,function(e){return e.objid===(s.courseId||r.userId)}),l=angular.element("#"+e).attr("aria-hidden");!0===o&&0===i.length&&"false"===l&&a.push({objid:s.courseId||r.userId,objtype:"home",section:t,index:e}),n.setVisitData(a)},!1==(!!window.chrome&&!!window.chrome.webstore)&&(i.showBrowserMsg=!0,"shown"!==localStorage.getItem("#BrowserIncompatibleModel")&&setTimeout(function(){$("#BrowserIncompatibleModel").modal({onHide:function(){}}).modal("show")},0)),i.showBrowserIncompatibleModel=function(){$("#BrowserIncompatibleModel").modal({onHide:function(){}}).modal("show")},i.hideModel=function(){localStorage.setItem("#BrowserIncompatibleModel","shown"),$("#BrowserIncompatibleModel").modal("hide"),$("#BrowserIncompatibleModel").modal("hide others"),$("#BrowserIncompatibleModel").modal("hide dimmer")}}]);