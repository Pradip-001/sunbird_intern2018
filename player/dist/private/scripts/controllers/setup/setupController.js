"use strict";angular.module("playerApp").controller("setupController",["$rootScope","setupService","toasterService",function(e,r,s){var o=this;o.getOrgTypes=function(){o.loader=s.loader("","loading please wait"),r.getOrgTypes().then(function(r){o.loader.showLoader=!1;try{if("OK"!==r.responseCode)throw"CLIENT_ERROR"===r.responseCode?new Error(r.params.errmsg):new Error("");var n=angular.copy(r.result.response);o.orgTypes=_.sortBy(n,function(e){return e.name.toLowerCase()})}catch(r){r.message?s.error(r.message):s.error(e.messages.fmsg.m0059)}})},o.openUpdateModal=function(e){$("#updateOrgType").modal({onShow:function(){o.selectedOrg={},o.selectedOrg.orgType=e,o.isUpdated=!1},onHide:function(){return o.selectedOrg={},o.isUpdated=!1,!0}}).modal("show"),$("#updateOrgType").modal("refresh")},o.openAddTypeModal=function(){$("#addOrgType").modal({onShow:function(){o.newOrgType=""},onHide:function(){return o.newOrgType="",!0}}).modal("show"),$("#addOrgType").modal("refresh")},o.addOrgType=function(n){var t={request:{name:n}};r.addOrgType(t).then(function(r){try{if("OK"!==r.responseCode)throw"CLIENT_ERROR"===r.responseCode?new Error(r.params.errmsg):new Error("");s.success(e.messages.smsg.m0035),o.getOrgTypes()}catch(r){r.message?s.error(r.message):s.error(e.messages.fmsg.m0058)}})},o.updateOrgType=function(n){var t={request:n};r.updateOrgType(t).then(function(r){try{if("OK"!==r.responseCode)throw"CLIENT_ERROR"===r.responseCode?new Error(r.params.errmsg):new Error("");s.success(e.messages.smsg.m0037),o.getOrgTypes()}catch(r){r.message?s.error(r.message):s.error(e.messages.fmsg.m0060)}})},o.getOrgTypes()}]);