"use strict";angular.module("playerApp").controller("FlaggedContentController",["contentService","searchService","config","$rootScope","$state","toasterService","PaginationService","workSpaceUtilsService","permissionsService","telemetryService",function(e,t,r,o,n,a,s,i,g,c){function l(e,t,r,o){var n={};return n.showError=!0,n.isClose=e,n.message=t,n.messageType=r,o&&(n.messageText=o),n}var p=this;p.userId=o.userId,p.contentStatus=["Flagged"],p.sortBy="desc",p.pageLimit=9,p.pager={},p.getAllFlaggedContent=function(e){e=e||1,p.loader=a.loader("",o.messages.stmsg.m0038),p.error={};var n={filters:{status:p.contentStatus,createdFor:g.getRoleOrgMap()&&g.getRoleOrgMap().FLAG_REVIEWER,objectType:"Content",contentType:r.contributeContentType,createdBy:{"!=":p.userId}},sort_by:{lastUpdatedOn:p.sortBy},offset:(e-1)*p.pageLimit,limit:p.pageLimit};t.search(n).then(function(t){t&&"OK"===t.responseCode?(p.loader.showLoader=!1,p.error.showError=!1,p.flaggedContentData=[],t.result.content&&(p.flaggedContentData=t.result.content),p.totalCount=t.result.count,0===p.flaggedContentData.length&&(p.error=l(!0,o.messages.stmsg.m0039,o.messages.stmsg.m0008)),p.pager=s.GetPager(t.result.count,e,p.pageLimit)):(p.loader.showLoader=!1,a.error(o.messages.fmsg.m0023),p.error.showError=!1)}).catch(function(){p.loader.showLoader=!1,a.error(o.messages.fmsg.m0023),p.error.showError=!1})},p.openContentPlayer=function(e){i.openContentPlayer(e,n.current.name)},p.setPage=function(e){e<1||e>p.pager.totalPages||p.getAllFlaggedContent(e)},p.initTocPopup=function(){$(".cardTitleEllipse").popup({inline:!0})},p.generateInteractEvent=function(e,t){c.interactTelemetryData("workspace",t,e,"1.0","flaggedContent","workspace-flagged-content")};var u=[];p.lineInView=function(e,t,r,o){var n=_.filter(u,function(e){return e.objid===r.identifier});!0===t&&0===n.length&&u.push({objid:r.identifier,objtype:r.contentType||"workspace",section:o,index:e}),console.log("------",u),c.setVisitData(u)}}]);