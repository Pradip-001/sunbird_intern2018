"use strict";angular.module("playerApp").controller("announcementInboxListController",["$rootScope","$scope","$timeout","$state","$stateParams","$q","toasterService","announcementAdapter","PaginationService",function(n,e,t,o,a,i,r,u,c){var s=this;s.init=function(n){s.pageLimit=10,s.showLoader=!0,s.showDataDiv=!1;var e=parseInt(a.page)||1;s.renderAnnouncementList(n,e)},s.renderAnnouncementList=function(n,e){s.limit=n||s.pageLimit,u.getInboxAnnouncementList(s.limit,e).then(function(n){n.result.announcements.length>0&&(s.totalCount=n.result.count,s.showDataDiv=!0,s.showLoader=!1,s.result=n.result,s.listData=n.result.announcements,s.pageNumber=e,s.pager=c.GetPager(n.result.count,e,s.pageLimit),_.forEach(s.listData,function(n){!1===n.received&&u.receivedAnnouncement(n.id).then(function(n){})})),s.showLoader=!1},function(n){n&&(s.showLoader=!1)})},s.getFileExtension=function(n){return u.getFileExtension(n)},s.showAnnouncementDetails=function(n,e){!1===n.read&&(u.readAnnouncement(n.id),angular.element(document.querySelector("#annInboxDiv-"+e)).removeClass("announcementCardLeftBorder")),o.go("announcementDetails",{announcementId:n.id,announcementName:n.title,pageId:"announcement_inbox_list"})},s.setPage=function(n){n<1||n>s.pager.totalPages||o.go("announcementInbox",{page:n})}}]);